<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Harten — Cadium · Trustworthy AI</title>

  <!-- Inline SVG favicon -->
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0' x2='1' y1='0' y2='1'%3E%3Cstop offset='0' stop-color='%23006fe6'/%3E%3Cstop offset='1' stop-color='%238b5cf6'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='100' height='100' rx='20' fill='url(%23g)'/%3E%3Ctext x='50' y='62' font-family='Inter, Arial' font-size='54' text-anchor='middle' fill='%23fff' font-weight='700'%3EH%3C/text%3E%3C/svg%3E">

  <!-- GSAP + ScrollTrigger + Observer -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/Observer.min.js"></script>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">

  <style>
    /* ---------- Base / Theme ---------- */
    :root{
      --bg-light: #fbfdff;
      --bg-mid: #f2f7fc;
      --card: #ffffff;
      --muted: #6b7280;
      --accent-a: #006fe6;
      --accent-b: #8b5cf6;
      --accent-c: #0ea5a4;
      --glass: rgba(255,255,255,0.6);
      --radius: 18px;
      --soft: 0 8px 40px rgba(8,12,34,0.08);
      --warm-shadow: 0 10px 40px rgba(139,92,246,0.06);
      --dark-overlay: rgba(4,9,23,0.45);
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color-scheme: light;
    }
    html,body{height:100%; margin:0; background:linear-gradient(180deg,var(--bg-light), #fff); -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; overflow-y: auto;}
    *{box-sizing:border-box}

    /* ---------- Layout ---------- */
    .container{max-width:1200px; margin:36px auto; padding:32px; display:grid; grid-template-columns: 1fr 420px; gap:28px;}
    header.top{grid-column:1/-1; display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:6px;}
    .brand{display:flex; gap:12px; align-items:center;}
    .logo{width:56px; height:56px; border-radius:12px; display:grid; place-items:center; color:white; font-weight:800; background:linear-gradient(135deg,var(--accent-a),var(--accent-b)); box-shadow:var(--soft); font-size:20px}
    h1{font-size:30px; margin:0; font-weight:800; letter-spacing:-0.02em}
    p.lead{margin:6px 0 0; color:var(--muted); font-size:15px; max-width:800px}

    .cta-row{display:flex; gap:12px; align-items:center}
    .btn{background:var(--accent-a); color:white; padding:12px 16px; border-radius:12px; border:0; cursor:pointer; font-weight:700; box-shadow:0 8px 28px rgba(0,111,230,0.14); transition:transform .22s cubic-bezier(.2,.9,.3,1)}
    .btn.secondary{background:transparent; color:var(--accent-a); border:1px solid rgba(0,111,230,0.12); box-shadow:none}

    /* ---------- Left column: hero + features ---------- */
    .hero{background:linear-gradient(180deg, rgba(255,255,255,0.8), rgba(255,255,255,0.95)); padding:28px; border-radius:18px; box-shadow:var(--soft); position:relative; overflow:visible}
    .hero-row{display:flex; gap:24px; align-items:flex-start}

    /* hero visual */
    .hero-visual{flex:1; min-height:340px; position:relative; border-radius:18px; overflow:hidden; background:linear-gradient(135deg,#f7fbff,#ffffff); border:1px solid rgba(9,20,40,0.03)}
    .orb{position:absolute; border-radius:50%; filter:blur(24px); opacity:0.85}
    .orb.a{width:300px; height:300px; left:-80px; top:-80px; background:linear-gradient(135deg, rgba(0,111,230,0.6), rgba(84,180,255,0.35)); mix-blend-mode:screen}
    .orb.b{width:220px; height:220px; right:-40px; top:10px; background:linear-gradient(135deg, rgba(139,92,246,0.55), rgba(192,132,252,0.28)); mix-blend-mode:screen}
    .orb.c{width:160px; height:160px; right:20px; bottom:-40px; background:linear-gradient(135deg, rgba(14,165,164,0.4), rgba(126,227,209,0.18)); mix-blend-mode:screen}

    .inspector{position:absolute; left:28px; top:28px; background:rgba(255,255,255,0.9); border-radius:12px; padding:12px; box-shadow:var(--warm-shadow); border:1px solid rgba(11,20,40,0.04); backdrop-filter:blur(6px)}
    .inspector .chips{display:flex; gap:8px; margin-top:8px}
    .chip{padding:8px 10px; border-radius:10px; background:linear-gradient(180deg,#fff,#fbfdff); font-weight:700; color:var(--accent-a); border:1px solid rgba(11,20,40,0.04)}

    /* floating inspector bottom right */
    .mini-inspector{position:absolute; right:24px; bottom:20px; padding:10px 12px; background:rgba(255,255,255,0.95); border-radius:12px; border:1px solid rgba(9,20,40,0.04); box-shadow:var(--soft); font-size:13px}

    /* left content */
    .left-col{flex:1}
    .play-btn{display:inline-flex; gap:10px; align-items:center; padding:10px 14px; border-radius:12px; background:linear-gradient(90deg,var(--accent-a),var(--accent-b)); color:white; font-weight:700; border:0}

    /* features grid */
    .feature-grid{display:grid; grid-template-columns:repeat(3, 1fr); gap:12px; margin-top:18px}
    .feature{background:linear-gradient(180deg,#fff,#fbfdff); padding:12px; border-radius:12px; border:1px solid rgba(11,20,40,0.04); cursor:pointer; transition:transform .26s cubic-bezier(.2,.9,.3,1), box-shadow .26s}
    .feature:hover{transform:translateY(-8px); box-shadow:0 16px 40px rgba(8,12,34,0.06)}
    .feature h4{margin:0; font-size:15px}
    .feature p{margin:6px 0 0; color:var(--muted); font-size:13px}

    /* ---------- Right column: preview + artifacts ---------- */
    .right{position:sticky; top:28px; align-self:start}
    .preview{background:linear-gradient(180deg,#fff,#fbfdff); border-radius:20px; padding:18px; box-shadow:var(--soft); border:1px solid rgba(9,20,40,0.04); min-height:340px}
    .preview-header{display:flex; gap:12px; align-items:center}
    .preview-visual{height:190px; border-radius:12px; display:grid; place-items:center; border:1px dashed rgba(9,20,40,0.04); background:linear-gradient(135deg, rgba(0,111,230,0.06), rgba(14,165,164,0.04)); color:var(--accent-a); font-weight:700}
    .meta{margin-top:12px; display:flex; gap:8px}

    /* signup area */
    .signup{margin-top:16px; border-radius:12px; padding:14px; background:linear-gradient(180deg, rgba(255,255,255,0.6), rgba(250,255,255,0.9)); border:1px solid rgba(9,20,40,0.04)}
    .form input, .form select, .form textarea{width:100%; padding:12px; border-radius:10px; border:1px solid rgba(11,20,40,0.06); font-size:14px; background:rgba(255,255,255,0.9)}
    .form-row{display:flex; gap:8px}

    /* floating popup near cursor */
    .float-popup{position:fixed; pointer-events:none; transform:translate(-50%,-50%) scale(.92); opacity:0; transition:opacity .22s, transform .22s; background:linear-gradient(180deg,#fff,#fbfdff); padding:8px 12px; border-radius:12px; border:1px solid rgba(9,20,40,0.06); box-shadow:var(--soft); min-width:200px; z-index:2000}
    .float-popup.show{opacity:1; transform:translate(-50%,-50%) scale(1)}

    /* particle canvas */
    canvas#particles{position:absolute; inset:0; pointer-events:none; z-index:0}

    /* responsive */
    @media (max-width:1000px){
      .container{grid-template-columns:1fr; padding:18px}
      .feature-grid{grid-template-columns:repeat(2,1fr)}
      .right{position:relative; top:auto}
    }
    @media (max-width:640px){
      .feature-grid{grid-template-columns:1fr}
      h1{font-size:24px}
    }

    /* revealed class (for IntersectionObserver stagger) */
    .reveal { opacity:0; transform:translateY(20px) scale(.99); transition: all .72s cubic-bezier(.2,.9,.3,1); }
    .reveal.revealed { opacity:1; transform:translateY(0) scale(1); }

    /* subtle dark-mode overlay (we'll transition op by JS based on mouse) */
    .dark-overlay { position:fixed; inset:0; pointer-events:none; mix-blend-mode:normal; transition:opacity .36s ease; opacity:0; z-index:-1; }
    .dark-overlay .overlay-inner { position:absolute; inset:0; background:linear-gradient(180deg, rgba(6,10,18,0.0) 0%, rgba(6,10,18,0.38) 100%); filter:blur(20px); opacity:0.95; }

    /* fine micro-interactions */
    .small-muted {font-size:13px; color:var(--muted)}
  </style>
</head>
<body>

  <!-- dark overlay for hybrid effect: JS will tween opacity & blend based on mouse position -->
  <div class="dark-overlay" id="darkOverlay" aria-hidden="true"><div class="overlay-inner"></div></div>

  <div class="container" id="app">
    <header class="top" role="banner">
      <div class="brand">
        <div class="logo" aria-hidden="true">H</div>
        <div>
          <div style="font-weight:800">Cadium</div>
          <div class="small-muted">Harten — Trustworthy AI</div>
        </div>
      </div>

      <div class="cta-row" role="navigation" aria-label="top actions">
        <button class="btn" id="btnAccess">Get early access</button>
        <button class="btn secondary" id="btnLearn">How it works</button>
      </div>
    </header>

    <!-- LEFT: hero + features -->
    <main class="hero" aria-labelledby="heroHeading">
      <div class="hero-row">
        <div class="left-col" style="flex:0.9">
          <h1 id="heroHeading">AI you can trust. Real outputs. Radical transparency.</h1>
          <p class="lead">Harten by Cadium orchestrates multiple AI models, surfaces trust scores & sources, and produces deliverables you can use — not guesses. Warm, human-centered interfaces with powerful reasoning under the hood.</p>

          <div style="margin-top:18px; display:flex; gap:12px; align-items:center;">
            <button class="play-btn" id="demoBtn">Try a smart flow</button>
            <button class="btn secondary" id="ctaDemo">Request demo</button>
          </div>

          <!-- creative features grid -->
          <div class="feature-grid" style="margin-top:20px;">
            <div class="feature reveal" data-key="smarter" tabindex="0">
              <h4>Smarter Answers</h4>
              <p>Multi-model routing & combining — get the most accurate result for each task.</p>
            </div>
            <div class="feature reveal" data-key="transparent" tabindex="0">
              <h4>Transparency Layer</h4>
              <p>Per-response trust scores, sources, and reasoning you can inspect.</p>
            </div>
            <div class="feature reveal" data-key="multimodal" tabindex="0">
              <h4>Multi-Modal</h4>
              <p>Video, images, voice, and documents analyzed together for deeper insight.</p>
            </div>
            <div class="feature reveal" data-key="outputs" tabindex="0">
              <h4>Smart Outputs</h4>
              <p>Slides, diagrams, code snippets, and formatted reports — ready to use.</p>
            </div>
            <div class="feature reveal" data-key="memory" tabindex="0">
              <h4>Extended Memory</h4>
              <p>Remembers preferences, goals and retrieves past conversations when relevant.</p>
            </div>
            <div class="feature reveal" data-key="workspace" tabindex="0">
              <h4>Workspace Tools</h4>
              <p>Shared canvases, whiteboards and project spaces for team collaboration.</p>
            </div>
          </div>

          <!-- signup small -->
          <div class="signup reveal" style="margin-top:18px;">
            <div style="display:flex; gap:10px; align-items:center; justify-content:space-between;">
              <div>
                <div style="font-weight:700">Join the early access list</div>
                <div class="small-muted" style="margin-top:6px">Limited pilot spots for researchers & teams</div>
              </div>
              <div>
                <button class="btn" onclick="document.getElementById('signupForm').scrollIntoView({behavior:'smooth'})">Sign up</button>
              </div>
            </div>
          </div>
        </div>

        <!-- HERO VISUAL (right side of hero area) -->
        <div class="hero-visual" role="img" aria-label="Harten interactive visual">
          <!-- orbs and animated shapes -->
          <div class="orb a" id="orbA" aria-hidden="true"></div>
          <div class="orb b" id="orbB" aria-hidden="true"></div>
          <div class="orb c" id="orbC" aria-hidden="true"></div>

          <!-- inspector stack -->
          <div class="inspector" id="inspector">
            <div style="font-size:13px; font-weight:700;">Live ensemble</div>
            <div class="small-muted" style="font-size:12px">Combining models & verifying</div>
            <div class="chips" style="margin-top:10px">
              <div class="chip">GPT</div>
              <div class="chip">Claude</div>
              <div class="chip">Gemini</div>
            </div>
          </div>

          <div class="mini-inspector" id="miniInspector" aria-hidden="true">
            Trust <strong id="miniTrust">95%</strong> • Sources 8
          </div>
        </div>
      </div>
    </main>

    <!-- RIGHT: preview card + artifacts -->
    <aside class="right" aria-label="feature preview">
      <section class="preview reveal" id="previewCard" aria-live="polite">
        <div class="preview-header">
          <div>
            <div style="font-weight:800" id="previewTitle">Smarter Answers — Multi-Model</div>
            <div class="small-muted">Hover features to explore</div>
          </div>
          <div style="margin-left:auto; align-self:center;" class="small-muted">Confidence <strong id="previewConfidence">95%</strong></div>
        </div>

        <div style="margin-top:12px; display:flex; gap:12px; align-items:stretch;">
          <div class="preview-visual" id="previewVisual">Ensembles + Verification</div>
          <div style="width:160px;">
            <div class="meta">
              <div class="small-muted">Trust</div>
              <div style="font-weight:700; font-size:18px" id="metaTrust">95%</div>
            </div>
            <div style="height:10px"></div>
            <div class="meta">
              <div class="small-muted">Output</div>
              <div style="font-weight:700" id="metaOutput">Research brief</div>
            </div>
          </div>
        </div>

        <div style="display:flex; gap:8px; margin-top:12px;">
          <button class="btn" id="tryFlowSmall">See a flow</button>
          <button class="btn secondary" id="docBtn">Docs</button>
        </div>
      </section>

      <section class="reveal" style="margin-top:14px;">
        <div class="card" style="background:linear-gradient(180deg,#fff,#fbfdff); padding:12px; border-radius:12px; box-shadow:var(--soft); border:1px solid rgba(9,20,40,0.04)">
          <div style="font-weight:700">Artifacts</div>
          <div class="small-muted" style="margin-top:6px">Examples generated by Harten</div>
          <div style="margin-top:10px; display:grid; gap:8px">
            <div style="padding:10px; border-radius:10px; background:#fff; border:1px solid rgba(9,20,40,0.04)">Annotated research brief • sources inline</div>
            <div style="padding:10px; border-radius:10px; background:#fff; border:1px solid rgba(9,20,40,0.04)">Slide deck (exportable)</div>
          </div>
        </div>
      </section>
    </aside>
  </div>

  <!-- Use-cases (full width section) -->
  <section style="max-width:1200px; margin:18px auto 42px; padding:28px; border-radius:18px; background:linear-gradient(180deg,#ffffff,#f7fbff); box-shadow:var(--soft);">
    <div style="display:flex; gap:18px; align-items:center; justify-content:space-between;">
      <div>
        <h3 style="margin:0; font-size:21px; font-weight:800">Built for real work</h3>
        <div class="small-muted" style="margin-top:8px">Students, researchers, creators and teams rely on Harten for trustworthy outputs.</div>
      </div>

      <div style="display:flex; gap:12px; align-items:center">
        <div style="text-align:center;">
          <div style="font-weight:800; font-size:18px">Students</div>
          <div class="small-muted">Verified summaries</div>
        </div>
        <div style="text-align:center;">
          <div style="font-weight:800; font-size:18px">Researchers</div>
          <div class="small-muted">Reproducible results</div>
        </div>
        <div style="text-align:center;">
          <div style="font-weight:800; font-size:18px">Teams</div>
          <div class="small-muted">Shared context</div>
        </div>
      </div>
    </div>
  </section>

  <!-- SIGNUP / FORM area -->
  <section id="signupForm" style="max-width:1200px; margin:0 auto 80px; padding:0 32px;">
    <div style="display:grid; grid-template-columns:1fr 360px; gap:24px; align-items:start;">
      <div style="background:linear-gradient(180deg,#fff,#fbfdff); padding:22px; border-radius:18px; box-shadow:var(--soft); border:1px solid rgba(9,20,40,0.04)">
        <h3 style="margin:0 0 6px; font-weight:800">Get early access</h3>
        <div class="small-muted">We prioritize teams, researchers, and creators for the pilot.</div>

        <!-- LOCAL FORM (preferred: replace placeholders with your Google Form action & entry IDs) -->
        <!--
          INSTRUCTIONS:
          1) In your Google Form page source find the <form action="https://docs.google.com/forms/d/e/.../formResponse"> URL
          2) Replace FORM_ACTION_URL below with that URL.
          3) Replace entry.NAME_ENTRY, entry.EMAIL_ENTRY, entry.ORG_ENTRY, entry.ROLE_ENTRY, entry.NOTE_ENTRY with your form entry.xxxxxx names from the Google Form.
        -->
        <form class="form" id="localGoogleForm" method="POST" action="FORM_ACTION_URL" target="hidden_iframe" style="margin-top:14px">
          <div class="form-row">
            <input name="entry.NAME_ENTRY" placeholder="Full name" required />
            <input name="entry.EMAIL_ENTRY" placeholder="Work email" required />
          </div>
          <div style="height:8px"></div>
          <input name="entry.ORG_ENTRY" placeholder="Organization (optional)" />
          <div style="height:8px"></div>
          <select name="entry.ROLE_ENTRY" aria-label="role">
            <option value="">Role</option>
            <option>Student</option>
            <option>Professional</option>
            <option>Researcher</option>
            <option>Creator</option>
            <option>Team Admin</option>
          </select>
          <div style="height:8px"></div>
          <textarea name="entry.NOTE_ENTRY" rows="3" placeholder="What will you use Harten for?"></textarea>

          <div style="display:flex; gap:10px; align-items:center; margin-top:10px;">
            <button class="btn" type="submit">Request access</button>
            <div class="small-muted">We respect your data — we never sell it.</div>
          </div>
        </form>

        <iframe name="hidden_iframe" style="display:none;"></iframe>

        <div style="margin-top:12px" class="small-muted">If you prefer embed mode, uncomment the iframe below (less styling control):</div>
        <!--
        <div style="margin-top:12px">
          <iframe src="YOUR_GOOGLE_IFRAME_URL" width="100%" height="800" style="border:0;border-radius:12px;overflow:hidden;"></iframe>
        </div>
        -->
      </div>

      <aside style="align-self:start">
        <div style="background:linear-gradient(180deg,#fff,#fbfdff); padding:16px; border-radius:12px; box-shadow:var(--soft); border:1px solid rgba(9,20,40,0.04)">
          <div class="small-muted">Plans</div>
          <div style="display:grid; gap:8px; margin-top:10px">
            <div style="display:flex; justify-content:space-between; align-items:center; padding:10px; border-radius:10px; background:linear-gradient(90deg,#fff,#fbfdff); border:1px solid rgba(9,20,40,0.03)"> <div><strong>Free</strong><div class="small-muted">limited queries</div></div> <div style="font-weight:800">$0</div></div>
            <div style="display:flex; justify-content:space-between; align-items:center; padding:10px; border-radius:10px; background:linear-gradient(90deg,#f6fbff,#ffffff); border:1px solid rgba(9,20,40,0.03)"> <div><strong>Pro</strong><div class="small-muted">priority routing</div></div> <div style="font-weight:800">$29/mo</div></div>
            <div style="display:flex; justify-content:space-between; align-items:center; padding:10px; border-radius:10px; background:linear-gradient(90deg,#fff,#fbfdff); border:1px solid rgba(9,20,40,0.03)"> <div><strong>Team</strong><div class="small-muted">shared workspaces</div></div> <div style="font-weight:800">$79/mo</div></div>
          </div>
        </div>
      </aside>
    </div>
  </section>

  <footer style="max-width:1200px; margin:0 auto 40px; padding:18px 32px; color:var(--muted); display:flex; justify-content:space-between; align-items:center">
    <div>© <span id="year"></span> Cadium — Harten</div>
    <div style="display:flex; gap:12px"><a class="small-muted" href="#">Privacy</a><a class="small-muted" href="#">Terms</a><a class="small-muted" href="#">Contact</a></div>
  </footer>

  <!-- floating contextual popup -->
  <div class="float-popup" id="floatPopup" role="status" aria-hidden="true">Feature info</div>

  <!-- particle canvas (optional subtle) -->
  <canvas id="particles"></canvas>

<script>
/* ---------- Setup ---------- */
const featureData = {
  smarter: {title:'Smarter Answers — Multi-Model', confidence:'95%', visual:'Ensembles GPT + Claude + Gemini', trust:'95%', output:'Research brief'},
  transparent: {title:'Transparency Layer', confidence:'88%', visual:'Trust scores & citations', trust:'88%', output:'Source-backed summary'},
  multimodal: {title:'Multi-Modal', confidence:'90%', visual:'Video • Image • Docs • Voice', trust:'90%', output:'Annotated analysis'},
  outputs: {title:'Smart Outputs', confidence:'92%', visual:'Slides • Code • Docs', trust:'92%', output:'Production-ready deliverables'},
  memory: {title:'Extended Memory', confidence:'93%', visual:'Personalized context', trust:'93%', output:'Context-aware suggestions'},
  workspace: {title:'Workspace Tools', confidence:'Team', visual:'Shared boards & files', trust:'Team', output:'Collaborative artifacts'}
};

document.getElementById('year').textContent = new Date().getFullYear();

/* ---------- GSAP registration ---------- */
gsap.registerPlugin(ScrollTrigger, Observer);

/* ---------- Cursor-driven hybrid background ---------- */
const darkOverlay = document.getElementById('darkOverlay');
let winW = window.innerWidth;
let winH = window.innerHeight;
window.addEventListener('resize', () => { winW = window.innerWidth; winH = window.innerHeight; });

document.addEventListener('mousemove', (e) => {
  // map X position to 0..1
  const t = Math.max(0, Math.min(1, e.clientX / winW));
  // map Y to warmth factor (we'll bias by Y as well)
  const yf = Math.max(0, Math.min(1, e.clientY / winH));
  // compute composite opacity (more to dark on right, and slightly more when lower)
  const target = 0.12 + 0.7 * t * (0.4 + 0.6*yf);
  // clamp
  const op = Math.min(0.95, Math.max(0, target));
  gsap.to(darkOverlay, {duration:0.6, opacity: op, ease:'power3.out'});
  // gentle shift of orbs and inspector
  const sx = (t - 0.5) * 36;
  document.getElementById('orbA').style.transform = `translate3d(${sx}px, ${-20 + (yf-0.5)*18}px, 0) scale(${1 + (t*0.05)})`;
  document.getElementById('orbB').style.transform = `translate3d(${sx * -0.6}px, ${10 + (yf-0.5)*10}px, 0) scale(${1 + (0.03 - 0.02*t)})`;
  document.getElementById('inspector').style.transform = `translate3d(${sx * 0.5}px, ${-3}px, 0)`;
});

/* ---------- Reveal animations for .reveal elements ---------- */
document.querySelectorAll('.reveal').forEach((el, i) => {
  ScrollTrigger.create({
    trigger: el,
    start: 'top 88%',
    onEnter: () => el.classList.add('revealed'),
    once: true
  });
});

/* ---------- Feature hover interactions (update preview) ---------- */
const features = document.querySelectorAll('.feature');
const previewTitle = document.getElementById('previewTitle');
const previewConfidence = document.getElementById('previewConfidence');
const previewVisual = document.getElementById('previewVisual');
const metaTrust = document.getElementById('metaTrust');
const metaOutput = document.getElementById('metaOutput');
const floatPopup = document.getElementById('floatPopup');

features.forEach(f => {
  f.addEventListener('mouseenter', () => {
    const key = f.dataset.key;
    // if data-key is missing, try lowercased first word
    const k = key || f.querySelector('h4').textContent.split(' ')[0].toLowerCase();
    const data = featureData[k] || featureData['smarter'];
    // animate preview swap
    gsap.fromTo(previewVisual, {y:6, opacity:0}, {y:0, opacity:1, duration:0.6, ease:'elastic.out(1,0.6)', onStart: ()=>{
      previewTitle.textContent = data.title;
      previewConfidence.textContent = data.confidence;
      previewVisual.textContent = data.visual;
      metaTrust.textContent = data.trust;
      metaOutput.textContent = data.output;
    }});
    // popup near cursor
    floatPopup.textContent = data.title + " — " + (f.querySelector('p') ? f.querySelector('p').textContent : '');
    floatPopup.classList.add('show');
  });
  f.addEventListener('mouseleave', ()=> floatPopup.classList.remove('show'));
  f.addEventListener('focus', ()=> f.dispatchEvent(new Event('mouseenter')));
  f.addEventListener('blur', ()=> f.dispatchEvent(new Event('mouseleave')));
});

/* move float popup with cursor */
document.addEventListener('mousemove', (e) => {
  const x = e.clientX + 18;
  const y = e.clientY + 18;
  floatPopup.style.left = x + 'px';
  floatPopup.style.top = y + 'px';
});

/* ---------- Hero micro animations (orbs & inspector) ---------- */
gsap.to('#orbA', { x: -12, y: -10, duration:8, repeat:-1, yoyo:true, ease:'sine.inOut' });
gsap.to('#orbB', { x: 18, y: 6, duration:10, repeat:-1, yoyo:true, ease:'sine.inOut' });
gsap.to('#orbC', { x: -6, y: 14, duration:7, repeat:-1, yoyo:true, ease:'sine.inOut' });
gsap.to('#miniInspector', { y:-6, duration:3.5, repeat:-1, yoyo:true, ease:'sine.inOut' });

/* ---------- Complex scroll-driven creative animations ---------- */
/* hero -> features subtle split reveal */
gsap.from('.hero-visual', {scrollTrigger:{trigger:'.hero', start:'top top', scrub:1}, y: 0, opacity:1, scale:1});

gsap.utils.toArray('.feature').forEach((el, i) => {
  gsap.from(el, {
    scrollTrigger: { trigger: el, start: 'top 92%' },
    opacity: 0, y: 18, scale: 0.995, duration: 0.8, delay: i*0.04, ease: 'power3.out'
  });
});

/* preview card animation when in viewport */
gsap.from('#previewCard', {
  scrollTrigger: { trigger: '#previewCard', start: 'top 92%' },
  y: 28, opacity: 0, duration: 0.86, ease: 'power3.out'
});

/* when try flow clicked - animate flow on preview */
document.getElementById('tryFlowSmall').addEventListener('click', () => {
  gsap.timeline()
    .to('#previewVisual', { scale: 1.05, duration: 0.25, ease: 'power2.out' })
    .to('#previewVisual', { scale: 1, duration: 0.8, ease: 'elastic.out(1,0.6)' });
});

/* subtle hover on play button to show flow */
document.getElementById('demoBtn').addEventListener('mouseenter', () => {
  gsap.to('#inspector', { x: 8, y: -6, duration: 0.35, ease: 'power3.out' });
});
document.getElementById('demoBtn').addEventListener('mouseleave', () => {
  gsap.to('#inspector', { x: 0, y: 0, duration: 0.35, ease: 'power3.out' });
});

/* ---------- Particle background (subtle) ---------- */
const canvas = document.getElementById('particles');
const ctx = canvas.getContext('2d');
let DPR = window.devicePixelRatio || 1;
function resizeCanvas() {
  canvas.width = canvas.offsetWidth * DPR;
  canvas.height = canvas.offsetHeight * DPR;
  ctx.scale(DPR, DPR);
}
function fillCanvasWithSize() {
  canvas.style.width = '100%';
  canvas.style.height = '100%';
  resizeCanvas();
}
fillCanvasWithSize();
window.addEventListener('resize', () => { DPR = window.devicePixelRatio || 1; fillCanvasWithSize(); });

const particles = [];
for (let i=0;i<40;i++){
  particles.push({
    x: Math.random() * window.innerWidth,
    y: Math.random() * window.innerHeight,
    r: 1 + Math.random()*3,
    a: 0.06 + Math.random()*0.12,
    vx: (Math.random()-0.5)*0.2,
    vy: (Math.random()-0.5)*0.2,
    hue: 200 + Math.random()*160
  });
}
function drawParticles(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles.forEach(p=>{
    ctx.beginPath();
    ctx.fillStyle = `hsla(${p.hue},70%,60%,${p.a})`;
    ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
    ctx.fill();
    p.x += p.vx;
    p.y += p.vy;
    if (p.x < -20) p.x = window.innerWidth + 20;
    if (p.x > window.innerWidth + 20) p.x = -20;
    if (p.y < -20) p.y = window.innerHeight + 20;
    if (p.y > window.innerHeight + 20) p.y = -20;
  });
  requestAnimationFrame(drawParticles);
}
drawParticles();

/* ---------- Form handling: local -> Google Form forwarding ---------- */
const localForm = document.getElementById('localGoogleForm');
localForm.addEventListener('submit', (e) => {
  // If the developer didn't replace the placeholder FORM_ACTION_URL, show helpful alert and prevent submit
  if (localForm.action === 'FORM_ACTION_URL' || localForm.action.trim() === '') {
    e.preventDefault();
    alert('Please replace FORM_ACTION_URL and entry placeholders in the form with your Google Form\'s action URL and entry IDs (see comments in HTML).');
    return;
  }
  // Submits to hidden iframe so page won't navigate
  const submitBtn = localForm.querySelector('button[type=submit]');
  gsap.to(submitBtn, {scale:0.96, duration:0.08, yoyo:true, repeat:1});
});

/* ---------- Small accessible interactions ---------- */
document.getElementById('btnAccess').addEventListener('click', ()=> document.getElementById('signupForm').scrollIntoView({behavior:'smooth'}));
document.getElementById('btnLearn').addEventListener('click', ()=> document.getElementById('previewCard').scrollIntoView({behavior:'smooth'}));
document.getElementById('docBtn').addEventListener('click', ()=> alert('Documentation coming soon — demo mode!'));

/* ---------- Keyboard focus helper ---------- */
// make feature cards focusable and keyboard-friendly (Enter simulates hover)
document.querySelectorAll('.feature').forEach(el=>{
  el.addEventListener('keydown', (ev)=>{
    if(ev.key === 'Enter' || ev.key === ' ') {
      ev.preventDefault();
      el.dispatchEvent(new Event('mouseenter'));
      setTimeout(()=> el.dispatchEvent(new Event('mouseleave')), 2200);
    }
  });
});

</script>
</body>
</html>
